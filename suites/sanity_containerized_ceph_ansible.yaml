tests:
   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true

   - test:
      name: containerized ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: collocated
            osd_auto_discovery: False
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: osd with collocated journal
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
### Section should be removed when https://bugzilla.redhat.com/show_bug.cgi?id=1548529 is fixed
        recreate-cluster: True


   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true
###

   - test:
      name: containerized ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: collocated
            dmcrypt: True
            osd_auto_discovery: False
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: encrypted osd with collocated journal
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
### Section should be removed when https://bugzilla.redhat.com/show_bug.cgi?id=1548529 is fixed
        recreate-cluster: True


   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true
###

   - test:
      name: containerized ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: non-collocated
            dedicated_devices:
              - /dev/vde
              - /dev/vde
              - /dev/vde
            osd_auto_discovery: False
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: osd with dedicated journal
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
### Section should be removed when https://bugzilla.redhat.com/show_bug.cgi?id=1548529 is fixed
        recreate-cluster: True


   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true
###

   - test:
      name: containerized ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: non-collocated
            dmcrypt: True
            dedicated_devices:
              - /dev/vde
              - /dev/vde
              - /dev/vde
            osd_auto_discovery: False
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: encrypted osd with dedicated journal
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
### Section should be removed when https://bugzilla.redhat.com/show_bug.cgi?id=1548529 is fixed
        recreate-cluster: True

   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true
###

   - test:
      name: containerized ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: collocated
            osd_auto_discovery: False
            ceph_rhcs_iso_install: true
            ceph_rhcs_iso_path: ~/ceph-ansible/iso/ceph.iso
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: iso source (osd with collocated journal)
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
### Section should be removed when https://bugzilla.redhat.com/show_bug.cgi?id=1548529 is fixed
        recreate-cluster: True


   - test:
       name: install ceph pre-requisities
       module: install_prereq.py
       abort-on-fail: true
###
   - test:
      name: ceph ansible
      module: test_ansible.py
      config:
        ansi_config:
            ceph_test: True
            ceph_origin: distro
            ceph_stable_release: luminous
            ceph_repository: rhcs
            osd_scenario: collocated
            dmcrypt: True
            osd_auto_discovery: True
            journal_size: 1024
            ceph_stable: True
            ceph_stable_rh_storage: True
            public_network: 172.16.0.0/12
            fetch_directory: ~/fetch
            ceph_docker_image: rhceph/rhceph-3-rhel7
            containerized_deployment: true
            ceph_docker_registry: registry.access.redhat.com
            copy_admin_key: true
            ceph_conf_overrides:
                global:
                  osd_pool_default_pg_num: 64
                  osd_default_pool_size: 2
                  osd_pool_default_pgp_num: 64
                  mon_max_pg_per_osd: 1024
                mon:
                  mon_allow_pool_delete: true
      desc: osd with collocated journal and autodiscovery
      destroy-cluster: False
      abort-on-fail: true

#   - test:
#      name: librbd workunit
#      module: test_workunit.py
#      config:
#            test_name: rbd/test_librbd_python.sh
#            branch: luminous
#            role: mon
#      desc: Test librbd unit tests
#   - test:
#      name: rbd cli automation
#      module: rbd_system.py
#      config:
#            test_name: rbd_cli_automation.py
#            branch: master
#      desc: Test rbd cli automation tests
#   - test:
#      name: check-ceph-health
#      module: exec.py
#      config:
#            cmd: ceph -s
#            sudo: True
#      desc: Check for ceph health debug info
#   - test:
#      name: rados_bench_test
#      module: radosbench.py
#      config:
#            pg_num: '128'
#            pool_type: 'normal'
#      desc: run rados bench for 360 - normal profile

   - test:
        name: ceph ansible purge
        module: exec_installer.py
        config:
              cmd: ansible-playbook ~/ceph-ansible/infrastructure-playbooks/purge-docker-cluster.yml -i ~/ceph-ansible/hosts -e ireallymeanit=yes -e remove_packages=yes
              sudo: False
        desc: Purge ceph cluster
        destroy-cluster: True